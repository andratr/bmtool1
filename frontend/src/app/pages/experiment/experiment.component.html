<section class="mycontent">
    <div class="title">ðŸ§ª Experiments</div>

    <div class="filters">
        <div>
            <label>From</label>
            <input type="date" [(ngModel)]="from" />
        </div>
        <div>
            <label>To</label>
            <input type="date" [(ngModel)]="to" />
        </div>
        <div class="grow">
            <label>Embedding</label>
            <input type="text" [(ngModel)]="embedding" placeholder="e.g. text-embedding-3-large" />
        </div>
        <div class="grow">
            <label>LLM</label>
            <input type="text" [(ngModel)]="llm" placeholder="e.g. llama3" />
        </div>
        <div class="buttons">
            <button class="btn" (click)="reload()">Apply</button>
            <button class="btn ghost" (click)="reset()">Reset</button>
        </div>
    </div>

    <div class="state" *ngIf="loading">Loadingâ€¦</div>
    <div class="state error" *ngIf="!loading && error">{{ error }}</div>
    <div class="state" *ngIf="!loading && !error && rows.length === 0">No experiments found.</div>

    <div class="card" *ngIf="!loading && !error && rows.length">
        <div class="table-wrap">
            <table class="table">
                <thead>
                <tr>
                    <th>Date</th>
                    <th>Embedding</th>
                    <th>LLM</th>
                    <th>kFw / kDoc</th>
                    <th>Hits (fw / doc)</th>
                    <th>Tok (p / c / t)</th>
                    <th>CCC</th>
                    <th>Latency (ms)</th>
                    <th>COâ‚‚ (g)</th>
                    <th>Technique</th>
                </tr>
                </thead>
                <tbody>
                <tr *ngFor="let e of rows">
                    <td>{{ e.experimentDate }}</td>
                    <td>{{ e.embeddingModel }}</td>
                    <td>{{ e.llmModel }}</td>
                    <td>{{ e.kFw }} / {{ e.kDoc }}</td>
                    <td>{{ e.fwHitsCount }} / {{ e.docHitsCount }}</td>
                    <td>
                        {{ (e.metric4PromptTok ?? 'â€”') }} /
                        {{ (e.metric5CompletionTok ?? 'â€”') }} /
                        {{ (e.metric6TotalTok ?? 'â€”') }}
                    </td>
                    <td>{{ show(e.metric1Ccc) }}</td>
                    <td>{{ show(e.metric2TimeMs) }}</td>
                    <td>{{ show(e.metric3Co2G) }}</td>
                    <td>{{ e.promptingTechnique || 'â€”' }}</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</section>
